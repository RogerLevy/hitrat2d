%actor kind: %rat
    var cnt var ang
;kind

z" assets/rat1.png" loadbmp constant rat.bmp

rat.bmp 32 32 tileset rat.ts


: deg>rad  0.01745329e f* ;

0e fvalue ftemp

: rblit ( flags bmp r: angle - )
    to ftemp  dup bmpwh swap 2 / s>f 2 / s>f  at@f
    ftemp deg>rad  swap al_draw_rotated_bitmap ;

: idle  step>  noop ;
: bop  1e vx fs! -2e vy fs! step>  0.05e vy fs+!  33 ang +! ;


%rat m: init
    idle
    physics>
        vx fv@ x fv+! 
    draw>
        cnt @ 3 / 9 mod rat.ts tile@ ang @ s>f rblit
        1 cnt +! ;